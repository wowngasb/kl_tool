<!DOCTYPE html>
<!-- saved from url=(0033)http://docs.daocloud.io/api/#???? -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>DaoCloud 开放 API</title>

    <link href="./DaoCloud 开放 API_files/screen.css" rel="stylesheet" type="text/css" media="screen">
    <link href="./DaoCloud 开放 API_files/print.css" rel="stylesheet" type="text/css" media="print">
    <script src="./DaoCloud 开放 API_files/jquery.min.js"></script>
      <script src="./DaoCloud 开放 API_files/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell","python"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="http://docs.daocloud.io/api/#" id="nav-button">
      <span>
        NAV
        <img src="./DaoCloud 开放 API_files/navbar.png">
      </span>
    </a>
    <div class="tocify-wrapper">
      <div style="width: 200px;margin-left: 10px;margin-top: 10px;">
        <a href="https://www.daocloud.io/"><img src="./DaoCloud 开放 API_files/logo.svg"></a>
      </div>
      
        <div class="lang-selector">
              <a href="http://docs.daocloud.io/api/#" data-language-name="shell">shell</a>
              <a href="http://docs.daocloud.io/api/#" data-language-name="python" class="active">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="tocify">
      <ul id="tocify-header0" class="tocify-header"><li class="tocify-item" data-unique="介绍"><a>介绍</a></li></ul><ul id="tocify-header1" class="tocify-header"><li class="tocify-item" data-unique="认证"><a>认证</a></li></ul><ul id="tocify-header2" class="tocify-header"><li class="tocify-item" data-unique="代码构建-build-flow"><a>代码构建 Build Flow</a></li><ul class="tocify-subheader" data-tag="2" style="display: block;"><li class="tocify-item tocify-focus" data-unique="项目列表"><a>项目列表</a></li><li class="tocify-item" data-unique="获取单个项目"><a>获取单个项目</a></li><li class="tocify-item" data-unique="手动构建项目"><a>手动构建项目</a></li><li class="tocify-item" data-unique="获取构建信息"><a>获取构建信息</a></li><li class="tocify-item" data-unique="构建机器-ip-列表"><a>构建机器 IP 列表</a></li></ul></ul><ul id="tocify-header3" class="tocify-header"><li class="tocify-item" data-unique="应用程序-app"><a>应用程序 App</a></li><ul class="tocify-subheader" data-tag="2" style=""><li class="tocify-item" data-unique="app-列表"><a>App 列表</a></li><li class="tocify-item" data-unique="获取单个-app"><a>获取单个 App</a></li><li class="tocify-item" data-unique="启动-app"><a>启动 App</a></li><li class="tocify-item" data-unique="停止-app"><a>停止 App</a></li><li class="tocify-item" data-unique="重启-app"><a>重启 App</a></li><li class="tocify-item" data-unique="重新发布-app"><a>重新发布 App</a></li><li class="tocify-item" data-unique="获取事件-action"><a>获取事件 Action</a></li></ul></ul><ul id="tocify-header4" class="tocify-header"><li class="tocify-item" data-unique="调用次数限制-rate-limiting"><a>调用次数限制 Rate Limiting</a></li></ul><ul id="tocify-header5" class="tocify-header"><li class="tocify-item" data-unique="webhook"><a>WebHook</a></li><ul class="tocify-subheader" data-tag="2" style=""><li class="tocify-item" data-unique="事件"><a>事件</a></li><li class="tocify-item" data-unique="payloads"><a>Payloads:</a></li></ul></ul><ul id="tocify-header6" class="tocify-header"><li class="tocify-item" data-unique="错误处理"><a>错误处理</a></li></ul></div>
        <ul class="toc-footer">
            <li><a href="https://dashboard.daocloud.io/">控制台</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <div name="介绍" data-unique="介绍"></div><h1 id="介绍">介绍</h1>

<p>欢迎使用 DaoCloud 开放 API</p>

<div name="认证" data-unique="认证"></div><h1 id="认证">认证</h1>

<ol>
<li><p>获取access token
打开个人设置页面可以看到用于调用接口的 access token</p></li>
<li><p>使用 access token 访问api
access token可以让您直接访问API。
你可以在http的header中传入Token。<code class="prettyprint">Authorization: token ACCESS-TOKEN</code></p></li>
</ol>

<div name="代码构建-build-flow" data-unique="代码构建-build-flow"></div><h1 id="代码构建-build-flow">代码构建 Build Flow</h1>

<div name="项目列表" data-unique="项目列表"></div><h2 id="项目列表">项目列表</h2>
<pre class="highlight shell" style="display: none;"><code>curl <span class="s2">"https://openapi.daocloud.io/v1/build-flows"</span>
  -H <span class="s2">"Authorization: token &lt;my token&gt;"</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/build-flows'</span><span class="p">,</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>

<blockquote>
<p>返回结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"build_flows"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90d58d34-e1ca-4724-9d7c-9af7e3635f12"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mongo_demo"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"repo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"daocloud/mongo_demo"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"src_provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"github"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"package_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5033330-978f-4466-97d1-625c57a7943f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-01T06:25:57+00:00"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>获取用户的项目列表.</p>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">GET https://openapi.daocloud.io/v1/build-flows</code></p>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>项目 id</td>
</tr>
<tr>
<td>name</td>
<td>项目名</td>
</tr>
<tr>
<td>repo</td>
<td>项目 repo 名, 可以使用 docker pull 命令拉取</td>
</tr>
<tr>
<td>src_provider</td>
<td>git 托管</td>
</tr>
<tr>
<td>status</td>
<td>项目当前构建状态 “Pending</td>
</tr>
<tr>
<td>package_id</td>
<td>build 成功后的镜像 id</td>
</tr>
<tr>
<td>created_at</td>
<td>项目创建时间， iso8601 utc</td>
</tr>
</tbody></table>

<div name="获取单个项目" data-unique="获取单个项目"></div><h2 id="获取单个项目">获取单个项目</h2>
<pre class="highlight shell" style="display: none;"><code>curl <span class="s2">"https://openapi.daocloud.io/v1/build-flows/&lt;build_flow_id&gt;"</span>
  -H <span class="s2">"Authorization: token &lt;my token&gt;"</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/build-flows/{build_flow_id}'</span><span class="p">,</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>

<blockquote>
<p>获取结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90d58d34-e1ca-4724-9d7c-9af7e3635f12"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mongo_demo"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"repo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"daocloud/mongo_demo"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"src_provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"github"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"src_origin_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://github.com/DaoCloud/golang-mongo-sample"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"package_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5033330-978f-4466-97d1-625c57a7943f"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-01T06:25:57+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>获取用户的项目.</p>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">GET https://openapi.daocloud.io/v1/build-flows/&lt;ID&gt;</code></p>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>项目 id</td>
</tr>
<tr>
<td>name</td>
<td>项目名</td>
</tr>
<tr>
<td>repo</td>
<td>项目 repo 名, 可以使用 docker pull 命令拉取</td>
</tr>
<tr>
<td>src_provider</td>
<td>git 托管</td>
</tr>
<tr>
<td>status</td>
<td>项目当前构建状态 "Pending, Started, Success, Failure, Error, Cancelled, Timeout”</td>
</tr>
<tr>
<td>src_origin_url</td>
<td>git 托管项目</td>
</tr>
<tr>
<td>package_id</td>
<td>build 成功后的镜像 id</td>
</tr>
<tr>
<td>created_at</td>
<td>项目创建时间， iso8601 utc</td>
</tr>
</tbody></table>

<div name="手动构建项目" data-unique="手动构建项目"></div><h2 id="手动构建项目">手动构建项目</h2>
<pre class="highlight shell" style="display: none;"><code>curl -X POST <span class="s2">"https://openapi.daocloud.io/v1/build-flows/&lt;build_flow_id&gt;/builds"</span> -H <span class="s2">"Authorization: token &lt;my token&gt;"</span> -H <span class="s2">"Content-Type: application/json"</span> -d <span class="s1">'{"branch":"master"}'</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/build-flows/{build_flow_id}/builds'</span><span class="p">,</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">},</span> <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s">"branch"</span><span class="p">:</span><span class="s">"master"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>  
</code></pre>

<blockquote>
<p>获取结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">345786</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pending"</span><span class="p">,</span><span class="w"> 
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-01T06:25:57+00:00"</span><span class="p">,</span><span class="w"> 
    </span><span class="nt">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DaoCloud"</span><span class="p">,</span><span class="w"> 
    </span><span class="nt">"sha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5785e42c7d6bfa754fc4765756e773ead6674as"</span><span class="p">,</span><span class="w"> 
    </span><span class="nt">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master-init"</span><span class="p">,</span><span class="w"> 
    </span><span class="nt">"branch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">POST https://openapi.daocloud.io/v1/build-flows/&lt;ID&gt;/builds</code></p>

<h3 id="参数">参数</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>branch</td>
<td>需要构建的代码分支名</td>
</tr>
</tbody></table>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>构建ID</td>
</tr>
<tr>
<td>branch</td>
<td>分支名</td>
</tr>
<tr>
<td>status</td>
<td>构建状态</td>
</tr>
<tr>
<td>tag</td>
<td>构建出来的镜像 tag</td>
</tr>
<tr>
<td>sha</td>
<td>git 分支的 sha</td>
</tr>
<tr>
<td>created_at</td>
<td>构建时间戳</td>
</tr>
</tbody></table>

<div name="获取构建信息" data-unique="获取构建信息"></div><h2 id="获取构建信息">获取构建信息</h2>
<pre class="highlight shell" style="display: none;"><code>curl <span class="s2">"https://openapi.daocloud.io/v1/build-flows/&lt;build_flow_id&gt;/&lt;build_type&gt;/&lt;build_id&gt;"</span> -H <span class="s2">"Authorization: token &lt;my token&gt;"</span> -H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/build-flows/{build_flow_id}/{build_type}/{build_id}'</span><span class="p">,</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>  
</code></pre>

<blockquote>
<p>获取结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">345786</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pending"</span><span class="p">,</span><span class="w"> 
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-01T06:25:57+00:00"</span><span class="p">,</span><span class="w"> 
    </span><span class="nt">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DaoCloud"</span><span class="p">,</span><span class="w"> 
    </span><span class="nt">"sha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5785e42c7d6bfa754fc4765756e773ead6674as"</span><span class="p">,</span><span class="w"> 
    </span><span class="nt">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master-init"</span><span class="p">,</span><span class="w"> 
    </span><span class="nt">"branch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">GET https://openapi.daocloud.io/v1/build-flows/&lt;build_flow_id&gt;/&lt;build_type&gt;/&lt;build_id&gt;</code></p>

<h3 id="参数">参数</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>build_flow_id</td>
<td>项目ID</td>
</tr>
<tr>
<td>build_type</td>
<td>构建类型，为image_build或者ci_build</td>
</tr>
<tr>
<td>build_id</td>
<td>构建ID</td>
</tr>
</tbody></table>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>构建ID</td>
</tr>
<tr>
<td>branch</td>
<td>分支名</td>
</tr>
<tr>
<td>status</td>
<td>构建状态</td>
</tr>
<tr>
<td>tag</td>
<td>构建出来的镜像 tag</td>
</tr>
<tr>
<td>sha</td>
<td>git 分支的 sha</td>
</tr>
<tr>
<td>created_at</td>
<td>构建时间戳</td>
</tr>
</tbody></table>

<div name="构建机器-ip-列表" data-unique="构建机器-ip-列表"></div><h2 id="构建机器-ip-列表">构建机器 IP 列表</h2>
<pre class="highlight shell" style="display: none;"><code>curl <span class="s2">"https://openapi.daocloud.io/v1/ship/iplist"</span> -H <span class="s2">"Authorization: token &lt;my token&gt;"</span> -H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/ship/iplist'</span><span class="p">,</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>  
</code></pre>

<blockquote>
<p>获取结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"iplist"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="err">//xxx.xxx.xxx.xxx</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">GET https://openapi.daocloud.io/v1/ship/iplist</code></p>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>iplist</td>
<td>构建机器 IP 列表</td>
</tr>
</tbody></table>

<div name="应用程序-app" data-unique="应用程序-app"></div><h1 id="应用程序-app">应用程序 App</h1>

<div name="app-列表" data-unique="app-列表"></div><h2 id="app-列表">App 列表</h2>
<pre class="highlight shell" style="display: none;"><code>curl <span class="s2">"https://openapi.daocloud.io/v1/apps"</span>
  -H <span class="s2">"Authorization: token &lt;my token&gt;"</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/apps'</span><span class="p">,</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>

<blockquote>
<p>返回结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b6b9e72-f127-41fe-8290-cc3df8dfdf19"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"daocloud.io/daocloud/daocloud"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-19T07:55:10+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_operated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-14T08:46:11+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"release_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1.0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"app_runtime"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a849cdf2-c79e-4c29-83ca-50751cc388a5"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"自有集群"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a5fad5a6-b967-4436-bcfd-1978110ea8cb"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open-api"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"enable_auto_redeploy"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>获取用户的 app 列表.</p>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">GET https://openapi.daocloud.io/v1/apps</code></p>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>App id</td>
</tr>
<tr>
<td>name</td>
<td>App 名称</td>
</tr>
<tr>
<td>state</td>
<td>App 状态</td>
</tr>
<tr>
<td>release_name</td>
<td>App 镜像版本</td>
</tr>
<tr>
<td>package</td>
<td>Package 信息</td>
</tr>
<tr>
<td>app_runtime</td>
<td>App 运行时信息</td>
</tr>
<tr>
<td>enable_auto_redeploy</td>
<td>是否启用自动发布</td>
</tr>
<tr>
<td>created_at</td>
<td>创建时间 iso8601 utc</td>
</tr>
<tr>
<td>last_operated_at</td>
<td>最后操作时间 iso8601 utc</td>
</tr>
</tbody></table>

<div name="获取单个-app" data-unique="获取单个-app"></div><h2 id="获取单个-app">获取单个 App</h2>
<pre class="highlight shell" style="display: none;"><code>curl <span class="s2">"https://openapi.daocloud.io/v1/apps/&lt;app_id&gt;"</span>
  -H <span class="s2">"Authorization: token &lt;my token&gt;"</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/apps/{app_id}'</span><span class="p">,</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>

<blockquote>
<p>获取结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"last_operated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-14T10:01:39+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open-api"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"release_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master-20ec560"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"app_runtime"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"自有集群"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ab6f0727-ba60-4166-8bc6-7012e61303e8"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"daocloud.io/daocloud/open-api"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-01T10:45:29+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expose_ports"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"publish_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not_publish"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"external"</span><span class="p">:</span><span class="w"> </span><span class="s2">"external"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"container_port"</span><span class="p">:</span><span class="w"> </span><span class="mi">443</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"publish_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"external"</span><span class="p">:</span><span class="w"> </span><span class="s2">"external"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"container_port"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"expose_port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8881</span><span class="p">,</span><span class="w">
    </span><span class="nt">"command"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d535ca76-b388-4356-8ad8-990e488fc1eb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"enable_auto_redeploy"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>获取用户的 app 列表.</p>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">GET https://openapi.daocloud.io/v1/apps/{app_id}</code></p>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>App id</td>
</tr>
<tr>
<td>name</td>
<td>App 名称</td>
</tr>
<tr>
<td>state</td>
<td>App 状态</td>
</tr>
<tr>
<td>release_name</td>
<td>App 镜像版本</td>
</tr>
<tr>
<td>package</td>
<td>Package 信息</td>
</tr>
<tr>
<td>app_runtime</td>
<td>App 运行时信息</td>
</tr>
<tr>
<td>config.instances</td>
<td>实例数</td>
</tr>
<tr>
<td>config.expose_port(s)</td>
<td>Container内部端口，当只有一个内部端口，且可访问方式为http时，显示为expose_port</td>
</tr>
<tr>
<td>config.command</td>
<td>启动命令</td>
</tr>
<tr>
<td>enable_auto_redeploy</td>
<td>是否启用自动发布</td>
</tr>
<tr>
<td>created_at</td>
<td>创建时间 iso8601 utc</td>
</tr>
<tr>
<td>last_operated_at</td>
<td>最后操作时间 iso8601 utc</td>
</tr>
</tbody></table>

<div name="启动-app" data-unique="启动-app"></div><h2 id="启动-app">启动 App</h2>
<pre class="highlight shell" style="display: none;"><code>curl -X POST <span class="s2">"https://openapi.daocloud.io/v1/apps/&lt;app_id&gt;/actions/start"</span>
  -H <span class="s2">"Authorization: token &lt;my token&gt;"</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/apps/{app_id}/actions/start'</span><span class="p">,</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>

<blockquote>
<p>获取结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80ae7c11-91d6-4edd-a785-e372bd04c4cb"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>启动 App.</p>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">POST https://openapi.daocloud.io/v1/apps/{app_id}/actions/start</code></p>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>action_id</td>
<td>事件 id</td>
</tr>
</tbody></table>

<div name="停止-app" data-unique="停止-app"></div><h2 id="停止-app">停止 App</h2>
<pre class="highlight shell" style="display: none;"><code>curl -X POST <span class="s2">"https://openapi.daocloud.io/v1/apps/&lt;app_id&gt;/actions/stop"</span>
  -H <span class="s2">"Authorization: token &lt;my token&gt;"</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/apps/{app_id}/actions/stop'</span><span class="p">,</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>

<blockquote>
<p>获取结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80ae7c11-91d6-4edd-a785-e372bd04c4cb"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>启动 App.</p>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">POST https://openapi.daocloud.io/v1/apps/{app_id}/actions/stop</code></p>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>action_id</td>
<td>事件 id</td>
</tr>
</tbody></table>

<div name="重启-app" data-unique="重启-app"></div><h2 id="重启-app">重启 App</h2>
<pre class="highlight shell" style="display: none;"><code>curl -X POST <span class="s2">"https://openapi.daocloud.io/v1/apps/&lt;app_id&gt;/actions/restart"</span>
  -H <span class="s2">"Authorization: token &lt;my token&gt;"</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/apps/{app_id}/actions/restart'</span><span class="p">,</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>

<blockquote>
<p>获取结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80ae7c11-91d6-4edd-a785-e372bd04c4cb"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>启动 App.</p>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">POST https://openapi.daocloud.io/v1/apps/{app_id}/actions/restart</code></p>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>action_id</td>
<td>事件 id</td>
</tr>
</tbody></table>

<div name="重新发布-app" data-unique="重新发布-app"></div><h2 id="重新发布-app">重新发布 App</h2>
<pre class="highlight shell" style="display: none;"><code>curl -X POST <span class="s2">"https://openapi.daocloud.io/v1/apps/&lt;app_id&gt;/actions/redeploy"</span>
  -H <span class="s2">"Authorization: token &lt;my token&gt;"</span> -H <span class="s2">"Content-Type: application/json"</span> -d <span class="s1">'{"release_name": "v1.0.0"}'</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/apps/{app_id}/actions/redeploy'</span><span class="p">,</span>
  <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s">"release_name"</span><span class="p">:</span> <span class="s">"v1.0.0"</span><span class="p">},</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>

<blockquote>
<p>获取结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80ae7c11-91d6-4edd-a785-e372bd04c4cb"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>发布 App 到指定版本.</p>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">POST https://openapi.daocloud.io/v1/apps/{app_id}/actions/redeploy</code></p>

<h3 id="参数">参数</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>release_name</td>
<td>要发布的版本名称</td>
</tr>
</tbody></table>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>action_id</td>
<td>事件 id</td>
</tr>
</tbody></table>

<div name="获取事件-action" data-unique="获取事件-action"></div><h2 id="获取事件-action">获取事件 Action</h2>
<pre class="highlight shell" style="display: none;"><code>curl <span class="s2">"https://openapi.daocloud.io/v1/apps/&lt;app_id&gt;/actions/&lt;action_id&gt;"</span>
  -H <span class="s2">"Authorization: token &lt;my token&gt;"</span>
</code></pre>
<pre class="highlight python" style="display: block;"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://openapi.daocloud.io/v1/apps/{app_id}/actions/{action_id}'</span><span class="p">,</span>
  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"token {token}"</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>

<blockquote>
<p>获取结果如下:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-14T10:16:23+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"action_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"start_app"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d535ca76-b388-4356-8ad8-990e488fc1eb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-14T10:16:21+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"error_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e3e490e-54ae-4214-924c-b7dcf3c33454"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"time_cost_seconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>获取事件信息.</p>

<h3 id="http-请求">HTTP 请求</h3>

<p><code class="prettyprint">GET https://openapi.daocloud.io/v1/apps/{app_id}/actions/{action_id}</code></p>

<h3 id="返回结果">返回结果</h3>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Action id</td>
</tr>
<tr>
<td>action_name</td>
<td>Action 名称</td>
</tr>
<tr>
<td>state</td>
<td>App 状态, SUCCESS -&gt; 成功, FAILED -&gt; 失败, IN_PROCESS -&gt; 正在执行</td>
</tr>
<tr>
<td>app_id</td>
<td>App id</td>
</tr>
<tr>
<td>start_date</td>
<td>事件开始时间 iso8601 utc</td>
</tr>
<tr>
<td>end_date</td>
<td>事件开始时间 iso8601 utc</td>
</tr>
<tr>
<td>error_info</td>
<td>错误信息</td>
</tr>
<tr>
<td>time_cost_seconds</td>
<td>耗费时间(秒)</td>
</tr>
</tbody></table>

<div name="调用次数限制-rate-limiting" data-unique="调用次数限制-rate-limiting"></div><h1 id="调用次数限制-rate-limiting">调用次数限制 Rate Limiting</h1>

<p>不同的API会有不同的调用次数限制, 请检查返回 header 中的如下字段</p>

<table><thead>
<tr>
<th>header 字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>X-RateLimit-Limit</td>
<td>每小时的限制调用次数，超过后服务器会返回 403 错误</td>
</tr>
<tr>
<td>X-RateLimit-Remaining</td>
<td>当前小时中还剩下的调用次数</td>
</tr>
<tr>
<td>X-RateLimit-Reset</td>
<td>限制重置时间 unix time</td>
</tr>
</tbody></table>

<div name="webhook" data-unique="webhook"></div><h1 id="webhook">WebHook</h1>

<p>WebHook 可以用于集成 DaoCloud 的项目管理，应用更新等。<br>
当 DaoCloud 平台有对应事件触发时，我们会给你发送一个 POST 请求。如果响应码不为<code class="prettyprint">200</code>，我们会在一段时间间隔内重试<code class="prettyprint">3</code>次 。 
如果你希望在本地调试 WebHook ，你可以使用 DaoCloud 应用的<a href="http://docs.daocloud.io/app-deploy-mgmt/tunnel">云隧道</a> 功能 。</p>

<p>Webhook 设置页面：</p>

<p><code class="prettyprint">https://dashboard.daocloud.io/settings/profile</code></p>

<div name="事件" data-unique="事件"></div><h2 id="事件">事件</h2>

<p>目前支持的 WebHook 事件有两种，镜像构建和持续集成。  </p>

<h3 id="镜像构建">镜像构建</h3>

<p>这是镜像构建的事件，在返回结果中的<code class="prettyprint">build_type</code> 为 <code class="prettyprint">image_build</code> 。<br>
如果构建成功，<code class="prettyprint">image</code>值将不为空。 此时你可以使用 <code class="prettyprint">docker pull</code>来拉取该镜像。  </p>

<h3 id="持续集成">持续集成</h3>

<p>这是持续集成的事件，在返回结果中的<code class="prettyprint">build_type</code> 为 <code class="prettyprint">ci_build</code> 。</p>

<div name="payloads" data-unique="payloads"></div><h2 id="payloads">Payloads:</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"repo"</span><span class="p">:</span><span class="s2">"daocloud/api"</span><span class="p">,</span><span class="w">    
    </span><span class="nt">"image"</span><span class="p">:</span><span class="s2">"daocloud.io/daocloud/api:master-init"</span><span class="p">,</span><span class="w">    
    </span><span class="nt">"build_flow_id"</span><span class="p">:</span><span class="s2">"8d7622ea-9323-4489-8c8e-fc4bed448961"</span><span class="p">,</span><span class="w">     
    </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"api"</span><span class="p">,</span><span class="w">  
    </span><span class="nt">"build"</span><span class="p">:</span><span class="w">
     </span><span class="p">{</span><span class="w">  
        </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"Success"</span><span class="p">,</span><span class="w">    
       </span><span class="nt">"duration_seconds"</span><span class="p">:</span><span class="mi">180</span><span class="p">,</span><span class="w">    
       </span><span class="nt">"author"</span><span class="p">:</span><span class="s2">"DaoCloud"</span><span class="p">,</span><span class="w">  
       </span><span class="nt">"triggered_by"</span><span class="p">:</span><span class="s2">"tag"</span><span class="p">,</span><span class="w">   
       </span><span class="nt">"sha"</span><span class="p">:</span><span class="s2">"a7c35d9dc7e93788ce81befbadeb0108de495e5e"</span><span class="p">,</span><span class="w">    
       </span><span class="nt">"tag"</span><span class="p">:</span><span class="s2">"master-init"</span><span class="p">,</span><span class="w">    
       </span><span class="nt">"branch"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">   
       </span><span class="nt">"pull_request"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">    
       </span><span class="nt">"message"</span><span class="p">:</span><span class="s2">"init build "</span><span class="p">,</span><span class="w">   
       </span><span class="nt">"started_at"</span><span class="p">:</span><span class="s2">"2015-01-01T08:20:00+00:00"</span><span class="p">,</span><span class="w">   
       </span><span class="nt">"build_type"</span><span class="p">:</span><span class="s2">"image_build"</span><span class="p">}</span><span class="w">   
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>字段</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>repo</td>
<td>用户项目全名， 用户名/项目</td>
</tr>
<tr>
<td>image</td>
<td>构建成功的镜像地址</td>
</tr>
<tr>
<td>build_flow_id</td>
<td>项目 id</td>
</tr>
<tr>
<td>name</td>
<td>项目名</td>
</tr>
<tr>
<td>build</td>
<td>新触发的构建</td>
</tr>
<tr>
<td>status</td>
<td>构建的状态, Success,Failure,Error,Started</td>
</tr>
<tr>
<td>duration_seconds</td>
<td>构建持续的时间</td>
</tr>
<tr>
<td>author</td>
<td>触发构建的用户</td>
</tr>
<tr>
<td>triggered_by</td>
<td>触发条件, 打tag还是手动构建</td>
</tr>
<tr>
<td>sha</td>
<td>代码 sha</td>
</tr>
<tr>
<td>tag</td>
<td>代码的tag</td>
</tr>
<tr>
<td>branch</td>
<td>代码的分支</td>
</tr>
<tr>
<td>pull_request</td>
<td>代码的pull request</td>
</tr>
<tr>
<td>message</td>
<td>代码 commit 消息</td>
</tr>
<tr>
<td>started_at</td>
<td>触发时间, iso8601 format</td>
</tr>
<tr>
<td>build_type</td>
<td>构建类型, image_build,ci_build</td>
</tr>
</tbody></table>

          <div name="错误处理" data-unique="错误处理"></div><h1 id="错误处理">错误处理</h1>

<p>DaoCloud API 可能返回以下错误:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request – 请求格式错误，请查阅对应的文档条目</td>
</tr>
<tr>
<td>401</td>
<td>bad credentials – access token 过期，或请求的API超过授权</td>
</tr>
<tr>
<td>404</td>
<td>Not Found – 调用的 API 不存在，请查看本文档</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed – 请求 method 错误， 请查阅对应的文档条目</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable – 请求不是 json 格式</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error – 服务器错误，请联系 DaoCloud 客服</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable – 服务器暂时下线，请稍候重试</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="http://docs.daocloud.io/api/#" data-language-name="shell">shell</a>
                <a href="http://docs.daocloud.io/api/#" data-language-name="python" class="active">python</a>
          </div>
      </div>
    </div>
  

</body></html>